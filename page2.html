<!-- page2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Market Insights</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Manrope:wght@400;500;700;800&family=Noto+Sans:wght@400;500;700;900" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body class="bg-[#131612] text-white font-sans min-h-screen flex flex-col justify-between">
    <div>
      <div class="flex justify-end p-4 pb-2">
        <div class="w-12">
          <button class="h-12 w-12">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
              <path d="M205.66,194.34a8,8,0,0,1-11.32,11.32..."/>
            </svg>
          </button>
        </div>
      </div>

      <h1 class="text-[22px] font-bold px-4 pb-3 pt-5">Market Insights</h1>
      <p class="px-4 pb-3">Stay ahead with AI-powered updates on international markets.</p>

      <div id="insights-container" class="px-4"></div>

      <div class="flex gap-3 px-4 py-3">
        <button class="flex-1 h-10 rounded-full bg-[#2e352c] text-white text-sm font-bold">Share</button>
        <button class="flex-1 h-10 rounded-full bg-[#8cd279] text-[#131612] text-sm font-bold">Download PDF</button>
      </div>
    </div>

    <div class="h-5 bg-[#131612]"></div>

    <script>
      async function fetchInsights() {
        const params = new URLSearchParams(window.location.search);
        const country = params.get('country') || 'Germany';

        const response = await fetch(`/api/generate?country=${country}`);
        const data = await response.json();

        const container = document.getElementById('insights-container');
        container.innerHTML = `
          <h2 class="text-[22px] font-bold pt-5 pb-3">Overview Market</h2>
          <p class="pb-3">${data.overview}</p>

          <h2 class="text-[22px] font-bold pt-5 pb-3">Latest News</h2>
          <p class="pb-3">${data.latest_news}</p>

          <h2 class="text-[22px] font-bold pt-5 pb-3">Export Opportunities</h2>
          <p class="pb-3">${data.export_opportunities}</p>
        `;
      }

      fetchInsights();
    </script>
  </body>
</html>
